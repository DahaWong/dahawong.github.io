<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1"><link rel="preconnect" href="https://gstatic.loli.net" crossorigin><link rel="preload" as="style" href="https://fonts.loli.net/css2?family=Marcellus:wght@400&amp;family=Cairo:wght@300&amp;family=Noto+Sans+SC:wght@100;300&amp;family=Noto+Serif+SC:wght@500&amp;display=swap"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Marcellus:wght@400&amp;family=Cairo:wght@300&amp;family=Noto+Sans+SC:wght@100;300&amp;family=Noto+Serif+SC:wght@500&amp;display=swap" media="print" onload='this.media="all"'><title>Daha</title><link rel="stylesheet" href="/css/index.css"><body><div class="cursor"></div><div class="theme-container"><div class="wrapper"><header class="blur-container"><div class="blur-layer"></div><nav class="category"><a href="/">追 浪</a></nav><button class="rss"><svg width="32" height="32" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path class="outer" d="M27 26.999h-3.883l-.002-.332C22.937 16.815 14.895 8.882 5 8.882V5c12.028 0 21.802 9.653 21.997 21.635L27 27z" fill="#5C7D7B" fill-rule="nonzero"/><path class="middle" d="M19.235 26.999h-3.883l-.003-.28C15.201 21.133 10.624 16.648 5 16.648v-3.882c7.862 0 14.235 6.373 14.235 14.234z" fill="#5C7D7B" fill-rule="nonzero"/><circle class="inner" fill="#FFA17A" cx="8" cy="24" r="3"/></g></svg><input class="rss-address" type="text" value="https://blog.daha.me/rss2" readonly></button></header><article class="post-container"><h1 class="post-title">无用之用</h1><div class="post-content"><blockquote><p>又做了一个机器人。</p></blockquote><p>昨天修改了一点网站主题的样式，结果糊里糊涂地把用来占位的草稿也上传了，于是各位 RSS 订户的列表里就多了一篇奇奇怪怪的空文章……也罢，迫使我把文章写出来，好好利用海绵里的水。</p><p>决定制作这个机器人算是一时兴起。上周日我随便浏览电报联系人的时候，看到 Bob 给我发了一条消息：「假期期间做了这么一个接口，<a target="_blank" rel="noopener" href="https://q24.io/useless/">https://q24.io/useless/</a> 」。假期？嗯，五一假期，而我二十多天后才看到。</p><p>太糟糕了，我想。随即快速地思考了一下用这个接口可以做些什么：这是一个随机生成灵感的接口，每请求一次，接口随机地返回一条灵感信息。那么，制作让使用者主动生成灵感、还是接收灵感推送的功能呢？稍稍权衡之后，我选择了后者，因为频道推送的形式可以进入电报的生态，让灵感的声音传得更远。</p><p><img src="/img/post/useless-api.png" alt="useless-api"></p><p>实现这个想法只需要做一个定时机器人，然后和频道绑定就可以了。原理大致是这样：开启一个定时任务，每天早晨向接口发出请求，拿到随机灵感的元数据之后，渲染出（←其实没有这么夸张）合适的样式，最后发送到频道。</p><p><a target="_blank" rel="noopener" href="https://liqi.io">利器</a>是一个面向创造者的访谈收录网站，站长就是 Bob，所以很多灵感收录自以前的利器访谈。为了更好地在电报里面作延伸阅读，我做了一个利器的随读模板以适配它的文章。模板的制作却比想象中难办，因为利器最早的文章写于二〇一五年，文章页的结构这几年发生了些微的变化，所以要同时适配新老版本。另一个产生困惑的地方是，旧文章的网页内容<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/HTML5/HTML5_element_list">标签</a>嵌套的层级很深（没记错的话，多穿了两层外套），电报的自动抓取没办法识别。最后使用了特殊的函数把标签一个个拽了出来。</p><p>好了，到这里工作基本完成！（显示下面的内嵌预览需要连接互联网）</p><script async src="https://telegram.org/js/telegram-widget.js?9" data-telegram-post="uselessideas/231" data-width="100%" data-userpic="true"></script><p>Bob 给灵感库起名为「<ruby>无用的想法<rt>Useless Ideas</rt></ruby>」。我喜欢这种海洋一般的无用，它代表一种<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%B6%8C%E7%8E%B0">涌现</a>出的、发生里程碑式质变的可能。我给频道选的头像是一个孤独的拼图碎片，它长得也很像<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%BA%B7%E5%A8%81%E7%94%9F%E5%91%BD%E6%B8%B8%E6%88%8F">生命游戏</a>里的「光速」滑翔器。盯着它看时，仿佛下一秒就会变化成另一个状态，包含着微妙的隐喻感。Bob 也说喜欢这个头像。</p><p>如果你也喜欢，不妨<a target="_blank" rel="noopener" href="https://t.me/uselessideas">点击这里关注</a>。据说往后灵感库会越来越丰富，我也会根据文章来源制作更多的随读模板。</p></div></article><div id="commento"></div></div></div><script defer src="https://cdn.commento.io/js/commento.js" data-no-fonts="true" data-hide-deleted="true" data-custom-text="true" data-auto-init="false"></script><script defer src="https://cdn.jsdelivr.net/gh/dahawong/dahawong.github.io/js/index.js"></script><script defer src="https://cdn.jsdelivr.net/gh/dahawong/dahawong.github.io/js/post.js"></script></body><meta name="generator" content="Hexo 5.0.0"></head></html>